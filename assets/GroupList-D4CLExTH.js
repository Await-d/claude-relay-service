import{r as h,c as H,o as re,x as g,L as w,y as d,z as e,P as n,Y as oe,O as C,K as E,aq as ae,aW as le,Q as P,ac as R,al as Y,a_ as ve,D as ue,C as $,q as he,I as de,u as ye}from"./vue-vendor-CcFZMz-v.js";import{_ as ie,b as B}from"./index-BloUuiuX.js";import{a as A,c as ge}from"./element-plus-C-1FTG0y.js";import{d as we}from"./vendor-B90ziCBp.js";const $e={class:"relative z-50 mx-auto my-6 w-full max-w-2xl p-4"},Ce={class:"relative flex w-full flex-col rounded-lg border-0 bg-white shadow-lg outline-none focus:outline-none dark:bg-gray-800"},_e={class:"flex items-start justify-between rounded-t border-b border-solid border-gray-200 p-5 dark:border-gray-600"},Ae={class:"flex items-center gap-3"},je={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},Me={class:"text-sm text-gray-500 dark:text-gray-400"},Ge={class:"relative flex-auto p-6"},Ue={class:"space-y-4"},Ee=["value"],Ie={class:"flex items-center gap-3"},Te={class:"space-y-4"},Fe={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Ve={class:"space-y-3 rounded-lg bg-gray-50 p-4 dark:bg-gray-700"},Le={class:"space-y-2"},Be={class:"flex items-center gap-2"},De={class:"flex items-center gap-2"},Se={class:"space-y-3 rounded-lg bg-gray-50 p-4 dark:bg-gray-700"},Ne={class:"space-y-2"},ze={class:"flex items-center gap-2"},Oe={class:"space-y-3 rounded-lg bg-gray-50 p-4 dark:bg-gray-700"},Pe={class:"space-y-2"},Re={class:"flex items-center gap-2"},qe={class:"space-y-3 rounded-lg bg-gray-50 p-4 dark:bg-gray-700"},We={class:"space-y-2"},Ke={class:"flex items-center gap-2"},Qe={class:"flex items-center gap-2"},Ye={class:"space-y-4"},He={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Je={class:"flex items-center gap-3"},Xe={class:"flex items-center gap-3"},Ze={class:"flex items-center justify-end rounded-b border-t border-solid border-gray-200 p-6 dark:border-gray-600"},et={class:"flex gap-3"},tt=["disabled"],st={key:0,class:"fas fa-spinner fa-spin"},rt={key:1,class:"fas fa-save"},at={__name:"GroupFormModal",props:{visible:{type:Boolean,required:!0},group:{type:Object,default:null},parentGroups:{type:Array,default:()=>[]}},emits:["close","saved"],setup(u,{emit:q}){const p=u,D=q,I=h(!1),l=h({name:"",description:"",parentId:"",isActive:!0,permissions:{"chat.create":!1,"chat.history":!1,"models.list":!1,"usage.view":!1,"admin.read":!1,"admin.write":!1},schedulingConfig:{strategy:"round_robin",fallbackToGlobal:!0,healthCheckEnabled:!0,weights:{}}}),v=H(()=>!!p.group),s=()=>{var k,t,m,_,F,G,z,V,W,S;p.group?l.value={name:p.group.name||"",description:p.group.description||"",parentId:p.group.parentId||"",isActive:p.group.isActive!==!1,permissions:{"chat.create":((k=p.group.permissions)==null?void 0:k["chat.create"])||!1,"chat.history":((t=p.group.permissions)==null?void 0:t["chat.history"])||!1,"models.list":((m=p.group.permissions)==null?void 0:m["models.list"])||!1,"usage.view":((_=p.group.permissions)==null?void 0:_["usage.view"])||!1,"admin.read":((F=p.group.permissions)==null?void 0:F["admin.read"])||!1,"admin.write":((G=p.group.permissions)==null?void 0:G["admin.write"])||!1},schedulingConfig:{strategy:((z=p.group.schedulingConfig)==null?void 0:z.strategy)||"round_robin",fallbackToGlobal:((V=p.group.schedulingConfig)==null?void 0:V.fallbackToGlobal)!==!1,healthCheckEnabled:((W=p.group.schedulingConfig)==null?void 0:W.healthCheckEnabled)!==!1,weights:((S=p.group.schedulingConfig)==null?void 0:S.weights)||{}}}:l.value={name:"",description:"",parentId:"",isActive:!0,permissions:{"chat.create":!1,"chat.history":!1,"models.list":!1,"usage.view":!1,"admin.read":!1,"admin.write":!1},schedulingConfig:{strategy:"round_robin",fallbackToGlobal:!0,healthCheckEnabled:!0,weights:{}}}},T=()=>!l.value.name||!l.value.name.trim()?(A.error("组名称不能为空"),!1):l.value.name.length>100?(A.error("组名称不能超过100个字符"),!1):l.value.description&&l.value.description.length>500?(A.error("组描述不能超过500个字符"),!1):!0,M=async()=>{if(T()){I.value=!0;try{const k={name:l.value.name.trim(),description:l.value.description.trim(),parentId:l.value.parentId||null,isActive:l.value.isActive,permissions:l.value.permissions,schedulingConfig:l.value.schedulingConfig};let t;if(v.value?t=await B.put(`/admin/groups/${p.group.id}`,k):t=await B.post("/admin/groups",k),t.success)A.success(v.value?"组更新成功":"组创建成功"),D("saved",t.data);else throw new Error(t.message||"保存失败")}catch(k){console.error("Failed to save group:",k),A.error(k.message||"保存组失败")}finally{I.value=!1}}};return re(()=>p.visible,k=>{k&&ue(()=>{s()})},{immediate:!0}),re(()=>p.group,()=>{p.visible&&s()},{deep:!0}),(k,t)=>u.visible?(d(),g("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden outline-none focus:outline-none",onClick:t[15]||(t[15]=oe(m=>k.$emit("close"),["self"]))},[t[44]||(t[44]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",$e,[e("div",Ce,[e("div",_e,[e("div",Ae,[t[16]||(t[16]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500"},[e("i",{class:"fas fa-users text-white"})],-1)),e("div",null,[e("h3",je,n(v.value?"编辑组":"创建组"),1),e("p",Me,n(v.value?"修改组信息和配置":"创建新的用户组"),1)])]),e("button",{class:"float-right ml-auto border-0 bg-transparent p-1 text-3xl font-semibold leading-none text-gray-400 hover:text-gray-600 focus:outline-none dark:text-gray-500 dark:hover:text-gray-300",onClick:t[0]||(t[0]=m=>k.$emit("close"))},[...t[17]||(t[17]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",Ge,[e("form",{class:"space-y-6",onSubmit:oe(M,["prevent"])},[e("div",Ue,[t[27]||(t[27]=e("h4",{class:"border-b border-gray-200 pb-2 text-lg font-medium text-gray-900 dark:border-gray-600 dark:text-gray-100"},[e("i",{class:"fas fa-info-circle mr-2 text-blue-500"}),C(" 基本信息 ")],-1)),e("div",null,[t[18]||(t[18]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[C(" 组名称 "),e("span",{class:"text-red-500"},"*")],-1)),E(e("input",{"onUpdate:modelValue":t[1]||(t[1]=m=>l.value.name=m),class:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"100",placeholder:"输入组名称",required:"",type:"text"},null,512),[[ae,l.value.name]]),t[19]||(t[19]=e("p",{class:"mt-1 text-xs text-gray-500"},"最多100个字符",-1))]),e("div",null,[t[20]||(t[20]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," 描述 ",-1)),E(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=m=>l.value.description=m),class:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"500",placeholder:"输入组描述",rows:"3"},null,512),[[ae,l.value.description]]),t[21]||(t[21]=e("p",{class:"mt-1 text-xs text-gray-500"},"最多500个字符",-1))]),e("div",null,[t[23]||(t[23]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," 父组 ",-1)),E(e("select",{"onUpdate:modelValue":t[3]||(t[3]=m=>l.value.parentId=m),class:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},[t[22]||(t[22]=e("option",{value:""},"无父组（顶级组）",-1)),(d(!0),g(P,null,R(u.parentGroups,m=>(d(),g("option",{key:m.id,value:m.id},n(m.name),9,Ee))),128))],512),[[le,l.value.parentId]]),t[24]||(t[24]=e("p",{class:"mt-1 text-xs text-gray-500"},"选择父组来创建层级结构",-1))]),e("div",null,[e("label",Ie,[E(e("input",{"onUpdate:modelValue":t[4]||(t[4]=m=>l.value.isActive=m),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox"},null,512),[[Y,l.value.isActive]]),t[25]||(t[25]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"激活组",-1))]),t[26]||(t[26]=e("p",{class:"ml-6 mt-1 text-xs text-gray-500"},"只有激活的组才能分配成员和账户",-1))])]),e("div",Te,[t[38]||(t[38]=e("h4",{class:"border-b border-gray-200 pb-2 text-lg font-medium text-gray-900 dark:border-gray-600 dark:text-gray-100"},[e("i",{class:"fas fa-shield-alt mr-2 text-green-500"}),C(" 权限配置 ")],-1)),e("div",Fe,[e("div",Ve,[t[30]||(t[30]=e("h5",{class:"font-medium text-gray-900 dark:text-gray-100"},"聊天权限",-1)),e("div",Le,[e("label",Be,[E(e("input",{"onUpdate:modelValue":t[5]||(t[5]=m=>l.value.permissions["chat.create"]=m),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox"},null,512),[[Y,l.value.permissions["chat.create"]]]),t[28]||(t[28]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"创建聊天",-1))]),e("label",De,[E(e("input",{"onUpdate:modelValue":t[6]||(t[6]=m=>l.value.permissions["chat.history"]=m),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox"},null,512),[[Y,l.value.permissions["chat.history"]]]),t[29]||(t[29]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"查看历史",-1))])])]),e("div",Se,[t[32]||(t[32]=e("h5",{class:"font-medium text-gray-900 dark:text-gray-100"},"模型权限",-1)),e("div",Ne,[e("label",ze,[E(e("input",{"onUpdate:modelValue":t[7]||(t[7]=m=>l.value.permissions["models.list"]=m),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox"},null,512),[[Y,l.value.permissions["models.list"]]]),t[31]||(t[31]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"列出模型",-1))])])]),e("div",Oe,[t[34]||(t[34]=e("h5",{class:"font-medium text-gray-900 dark:text-gray-100"},"使用统计",-1)),e("div",Pe,[e("label",Re,[E(e("input",{"onUpdate:modelValue":t[8]||(t[8]=m=>l.value.permissions["usage.view"]=m),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox"},null,512),[[Y,l.value.permissions["usage.view"]]]),t[33]||(t[33]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"查看使用量",-1))])])]),e("div",qe,[t[37]||(t[37]=e("h5",{class:"font-medium text-gray-900 dark:text-gray-100"},"管理权限",-1)),e("div",We,[e("label",Ke,[E(e("input",{"onUpdate:modelValue":t[9]||(t[9]=m=>l.value.permissions["admin.read"]=m),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox"},null,512),[[Y,l.value.permissions["admin.read"]]]),t[35]||(t[35]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"只读管理",-1))]),e("label",Qe,[E(e("input",{"onUpdate:modelValue":t[10]||(t[10]=m=>l.value.permissions["admin.write"]=m),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox"},null,512),[[Y,l.value.permissions["admin.write"]]]),t[36]||(t[36]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"管理写入",-1))])])])])]),e("div",Ye,[t[43]||(t[43]=e("h4",{class:"border-b border-gray-200 pb-2 text-lg font-medium text-gray-900 dark:border-gray-600 dark:text-gray-100"},[e("i",{class:"fas fa-cogs mr-2 text-purple-500"}),C(" 调度配置 ")],-1)),e("div",null,[t[40]||(t[40]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," 调度策略 ",-1)),E(e("select",{"onUpdate:modelValue":t[11]||(t[11]=m=>l.value.schedulingConfig.strategy=m),class:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},[...t[39]||(t[39]=[ve('<option value="round_robin" data-v-609730aa>轮询 (Round Robin)</option><option value="random" data-v-609730aa>随机 (Random)</option><option value="weighted" data-v-609730aa>权重 (Weighted)</option><option value="priority" data-v-609730aa>优先级 (Priority)</option><option value="least_recent" data-v-609730aa>最少使用 (Least Recent)</option>',5)])],512),[[le,l.value.schedulingConfig.strategy]])]),e("div",He,[e("label",Je,[E(e("input",{"onUpdate:modelValue":t[12]||(t[12]=m=>l.value.schedulingConfig.fallbackToGlobal=m),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox"},null,512),[[Y,l.value.schedulingConfig.fallbackToGlobal]]),t[41]||(t[41]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," 回退到全局账户 ",-1))]),e("label",Xe,[E(e("input",{"onUpdate:modelValue":t[13]||(t[13]=m=>l.value.schedulingConfig.healthCheckEnabled=m),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox"},null,512),[[Y,l.value.schedulingConfig.healthCheckEnabled]]),t[42]||(t[42]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," 启用健康检查 ",-1))])])])],32)]),e("div",Ze,[e("div",et,[e("button",{class:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",type:"button",onClick:t[14]||(t[14]=m=>k.$emit("close"))}," 取消 "),e("button",{class:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-indigo-500 to-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:from-indigo-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-50",disabled:I.value,type:"submit",onClick:M},[I.value?(d(),g("i",st)):(d(),g("i",rt)),C(" "+n(I.value?"保存中...":v.value?"更新":"创建"),1)],8,tt)])])])])])):w("",!0)}},ot=ie(at,[["__scopeId","data-v-609730aa"]]),lt={class:"relative z-50 mx-auto my-6 w-full max-w-4xl p-4"},it={class:"relative flex w-full flex-col rounded-lg border-0 bg-white shadow-lg outline-none focus:outline-none dark:bg-gray-800"},nt={class:"flex items-start justify-between rounded-t border-b border-solid border-gray-200 p-5 dark:border-gray-600"},dt={class:"flex items-center gap-3"},ut={class:"text-sm text-gray-500 dark:text-gray-400"},gt={class:"relative flex-auto p-6"},ct={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},xt={class:"space-y-4"},pt={class:"flex items-center justify-between"},mt=["disabled"],ft={class:"relative"},yt={class:"max-h-80 overflow-y-auto rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-gray-700"},vt={key:0,class:"p-8 text-center"},bt={key:1,class:"p-8 text-center"},kt={key:2,class:"divide-y divide-gray-200 dark:divide-gray-600"},ht={class:"flex items-center gap-3"},wt={class:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-r from-blue-400 to-indigo-400 text-sm text-white"},$t={class:"font-medium text-gray-900 dark:text-gray-100"},Ct={class:"text-sm text-gray-500 dark:text-gray-400"},_t={class:"mt-1 flex items-center gap-2"},At={class:"inline-flex items-center rounded bg-blue-100 px-1.5 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},jt=["disabled","onClick"],Mt={class:"space-y-4"},Gt={class:"flex items-center justify-between"},Ut={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Et=["disabled"],It={class:"max-h-80 overflow-y-auto rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-gray-700"},Tt={key:0,class:"p-8 text-center"},Ft={key:1,class:"p-8 text-center"},Vt={key:2,class:"divide-y divide-gray-200 dark:divide-gray-600"},Lt={class:"flex items-center gap-3"},Bt={class:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-r from-indigo-400 to-purple-400 text-sm text-white"},Dt={class:"font-medium text-gray-900 dark:text-gray-100"},St={class:"text-sm text-gray-500 dark:text-gray-400"},Nt={class:"mt-1 flex items-center gap-2"},zt={class:"inline-flex items-center rounded bg-blue-100 px-1.5 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},Ot={key:0,class:"inline-flex items-center rounded bg-purple-100 px-1.5 py-0.5 text-xs font-medium text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"},Pt=["disabled","onClick"],Rt={key:0,class:"flex gap-2 pt-2"},qt=["disabled"],Wt={class:"mt-6 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20"},Kt={class:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4"},Qt={class:"font-medium text-blue-900 dark:text-blue-100"},Yt={class:"font-medium text-blue-900 dark:text-blue-100"},Ht={class:"font-medium text-blue-900 dark:text-blue-100"},Jt={class:"font-medium text-blue-900 dark:text-blue-100"},Xt={class:"flex items-center justify-end rounded-b border-t border-solid border-gray-200 p-6 dark:border-gray-600"},Zt={__name:"MemberManagementModal",props:{visible:{type:Boolean,required:!0},group:{type:Object,default:null}},emits:["close","updated"],setup(u,{emit:q}){const p=u,D=q,I=h(!1),l=h(!1),v=h(null),s=h(null),T=h(!1),M=h(""),k=h([]),t=h([]),m=H(()=>{if(!M.value)return k.value;const y=M.value.toLowerCase();return k.value.filter(o=>o.username.toLowerCase().includes(y)||o.fullName&&o.fullName.toLowerCase().includes(y)||o.email&&o.email.toLowerCase().includes(y))}),_=H(()=>t.value.filter(y=>y.status==="active").length),F=H(()=>new Date().toLocaleTimeString("zh-CN")),G=async()=>{var y;if(p.group){I.value=!0;try{const o=await B.get("/admin/users");if(!o.success)throw new Error(o.message||"获取用户列表失败");const L=await B.get(`/admin/groups/${p.group.id}/members`);if(!L.success)throw new Error(L.message||"获取组成员失败");const b=o.data.users||o.data||[],N=new Set(((y=L.data.members)==null?void 0:y.map(K=>K.id))||[]);k.value=b.filter(K=>!N.has(K.id))}catch(o){console.error("Failed to load available users:",o),A.error(o.message||"加载可添加用户失败"),k.value=[]}finally{I.value=!1}}},z=async()=>{if(p.group){l.value=!0;try{const y=await B.get(`/admin/groups/${p.group.id}/members`);if(y.success)t.value=y.data.members||[];else throw new Error(y.message||"获取组成员失败")}catch(y){console.error("Failed to load group members:",y),A.error(y.message||"加载组成员失败"),t.value=[]}finally{l.value=!1}}},V=async y=>{v.value=y.id;try{const o=await B.post(`/admin/groups/${p.group.id}/members`,{userId:y.id});if(o.success)A.success(`用户 ${y.username} 已添加到组`),k.value=k.value.filter(L=>L.id!==y.id),t.value.push(y),D("updated");else throw new Error(o.message||"添加用户失败")}catch(o){console.error("Failed to add user to group:",o),A.error(o.message||"添加用户到组失败")}finally{v.value=null}},W=async y=>{s.value=y.id;try{const o=await B.delete(`/admin/groups/${p.group.id}/members/${y.id}`);if(o.success)A.success(`用户 ${y.username} 已从组中移除`),t.value=t.value.filter(L=>L.id!==y.id),k.value.push(y),D("updated");else throw new Error(o.message||"移除用户失败")}catch(o){console.error("Failed to remove user from group:",o),A.error(o.message||"从组中移除用户失败")}finally{s.value=null}},S=async()=>{try{await ge.confirm(`确定要移除组 "${p.group.name}" 中的所有 ${t.value.length} 个成员吗？`,"确认移除所有成员",{confirmButtonText:"确定移除",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"}),await O()}catch(y){y!=="cancel"&&console.error("Failed to confirm remove all members:",y)}},O=async()=>{T.value=!0;try{const y=await B.delete(`/admin/groups/${p.group.id}/members`);if(y.success)A.success("所有成员已从组中移除"),k.value.push(...t.value),t.value=[],D("updated");else throw new Error(y.message||"移除所有成员失败")}catch(y){console.error("Failed to remove all members:",y),A.error(y.message||"移除所有成员失败")}finally{T.value=!1}};return re(()=>p.visible,y=>{y&&p.group&&(z(),G())},{immediate:!0}),re(()=>p.visible,y=>{y&&(M.value="")}),(y,o)=>{var L;return u.visible?(d(),g("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden outline-none focus:outline-none",onClick:o[3]||(o[3]=oe(b=>y.$emit("close"),["self"]))},[o[24]||(o[24]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",lt,[e("div",it,[e("div",nt,[e("div",dt,[o[5]||(o[5]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-r from-blue-500 to-indigo-500"},[e("i",{class:"fas fa-users text-white"})],-1)),e("div",null,[o[4]||(o[4]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},"成员管理",-1)),e("p",ut,' 管理组 "'+n((L=u.group)==null?void 0:L.name)+'" 的成员 ',1)])]),e("button",{class:"float-right ml-auto border-0 bg-transparent p-1 text-3xl font-semibold leading-none text-gray-400 hover:text-gray-600 focus:outline-none dark:text-gray-500 dark:hover:text-gray-300",onClick:o[0]||(o[0]=b=>y.$emit("close"))},[...o[6]||(o[6]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",gt,[e("div",ct,[e("div",xt,[e("div",pt,[o[8]||(o[8]=e("h4",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},[e("i",{class:"fas fa-user-plus mr-2 text-green-500"}),C(" 可添加用户 ")],-1)),e("button",{class:"text-sm text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",disabled:I.value,onClick:G},[e("i",{class:$(["fas mr-1",I.value?"fa-spinner fa-spin":"fa-sync-alt"])},null,2),o[7]||(o[7]=C(" 刷新 ",-1))],8,mt)]),e("div",ft,[o[9]||(o[9]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),E(e("input",{"onUpdate:modelValue":o[1]||(o[1]=b=>M.value=b),class:"w-full rounded-lg border border-gray-200 bg-white py-2 pl-10 pr-4 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",placeholder:"搜索用户...",type:"text"},null,512),[[ae,M.value]])]),e("div",yt,[I.value?(d(),g("div",vt,[...o[10]||(o[10]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-gray-400"},null,-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"加载中...",-1)])])):m.value.length===0?(d(),g("div",bt,[...o[11]||(o[11]=[e("i",{class:"fas fa-user-slash text-3xl text-gray-300 dark:text-gray-500"},null,-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"没有可添加的用户",-1)])])):(d(),g("div",kt,[(d(!0),g(P,null,R(m.value,b=>{var N;return d(),g("div",{key:b.id,class:"flex items-center justify-between p-4 transition-colors hover:bg-gray-50 dark:hover:bg-gray-600"},[e("div",ht,[e("div",wt,n((N=b.username)==null?void 0:N.charAt(0).toUpperCase()),1),e("div",null,[e("div",$t,n(b.username),1),e("div",Ct,n(b.fullName||b.email||"No additional info"),1),e("div",_t,[e("span",{class:$(["inline-flex items-center rounded px-1.5 py-0.5 text-xs font-medium",b.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"])},n(b.status==="active"?"活跃":"非活跃"),3),e("span",At,n(b.role||"用户"),1)])])]),e("button",{class:"flex items-center gap-1 rounded-md bg-green-500 px-3 py-1.5 text-sm text-white transition-colors hover:bg-green-600 disabled:cursor-not-allowed disabled:opacity-50",disabled:v.value===b.id,onClick:K=>V(b)},[e("i",{class:$(["fas",v.value===b.id?"fa-spinner fa-spin":"fa-plus"])},null,2),o[12]||(o[12]=C(" 添加 ",-1))],8,jt)])}),128))]))])]),e("div",Mt,[e("div",Gt,[e("h4",Ut,[o[13]||(o[13]=e("i",{class:"fas fa-users mr-2 text-blue-500"},null,-1)),C(" 当前成员 ("+n(t.value.length)+") ",1)]),e("button",{class:"text-sm text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",disabled:l.value,onClick:z},[e("i",{class:$(["fas mr-1",l.value?"fa-spinner fa-spin":"fa-sync-alt"])},null,2),o[14]||(o[14]=C(" 刷新 ",-1))],8,Et)]),e("div",It,[l.value?(d(),g("div",Tt,[...o[15]||(o[15]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-gray-400"},null,-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"加载中...",-1)])])):t.value.length===0?(d(),g("div",Ft,[...o[16]||(o[16]=[e("i",{class:"fas fa-user-friends text-3xl text-gray-300 dark:text-gray-500"},null,-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"暂无成员",-1)])])):(d(),g("div",Vt,[(d(!0),g(P,null,R(t.value,b=>{var N;return d(),g("div",{key:b.id,class:"flex items-center justify-between p-4 transition-colors hover:bg-gray-50 dark:hover:bg-gray-600"},[e("div",Lt,[e("div",Bt,n((N=b.username)==null?void 0:N.charAt(0).toUpperCase()),1),e("div",null,[e("div",Dt,n(b.username),1),e("div",St,n(b.fullName||b.email||"No additional info"),1),e("div",Nt,[e("span",{class:$(["inline-flex items-center rounded px-1.5 py-0.5 text-xs font-medium",b.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"])},n(b.status==="active"?"活跃":"非活跃"),3),e("span",zt,n(b.role||"用户"),1),b.authMethod?(d(),g("span",Ot,n(b.authMethod.toUpperCase()),1)):w("",!0)])])]),e("button",{class:"flex items-center gap-1 rounded-md bg-red-500 px-3 py-1.5 text-sm text-white transition-colors hover:bg-red-600 disabled:cursor-not-allowed disabled:opacity-50",disabled:s.value===b.id,onClick:K=>W(b)},[e("i",{class:$(["fas",s.value===b.id?"fa-spinner fa-spin":"fa-minus"])},null,2),o[17]||(o[17]=C(" 移除 ",-1))],8,Pt)])}),128))]))]),t.value.length>0?(d(),g("div",Rt,[e("button",{class:"flex items-center gap-1 rounded-md bg-red-500 px-3 py-2 text-sm text-white transition-colors hover:bg-red-600 disabled:cursor-not-allowed disabled:opacity-50",disabled:T.value,onClick:S},[e("i",{class:$(["fas",T.value?"fa-spinner fa-spin":"fa-users-slash"])},null,2),o[18]||(o[18]=C(" 移除所有成员 ",-1))],8,qt)])):w("",!0)])]),e("div",Wt,[o[23]||(o[23]=e("div",{class:"mb-2 flex items-center gap-2"},[e("i",{class:"fas fa-info-circle text-blue-500"}),e("span",{class:"font-medium text-blue-900 dark:text-blue-100"},"成员统计")],-1)),e("div",Kt,[e("div",null,[o[19]||(o[19]=e("span",{class:"text-blue-600 dark:text-blue-300"},"当前成员：",-1)),e("span",Qt,n(t.value.length),1)]),e("div",null,[o[20]||(o[20]=e("span",{class:"text-blue-600 dark:text-blue-300"},"活跃成员：",-1)),e("span",Yt,n(_.value),1)]),e("div",null,[o[21]||(o[21]=e("span",{class:"text-blue-600 dark:text-blue-300"},"可添加：",-1)),e("span",Ht,n(k.value.length),1)]),e("div",null,[o[22]||(o[22]=e("span",{class:"text-blue-600 dark:text-blue-300"},"最后更新：",-1)),e("span",Jt,n(F.value),1)])])])]),e("div",Xt,[e("button",{class:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",type:"button",onClick:o[2]||(o[2]=b=>y.$emit("close"))}," 关闭 ")])])])])):w("",!0)}}},es=ie(Zt,[["__scopeId","data-v-b8f31f8c"]]),ts={class:"relative z-50 mx-auto my-6 w-full max-w-6xl p-4"},ss={class:"relative flex w-full flex-col rounded-lg border-0 bg-white shadow-lg outline-none focus:outline-none dark:bg-gray-800"},rs={class:"flex items-start justify-between rounded-t border-b border-solid border-gray-200 p-5 dark:border-gray-600"},as={class:"flex items-center gap-3"},os={class:"text-sm text-gray-500 dark:text-gray-400"},ls={class:"relative flex-auto p-6"},is={class:"mb-6"},ns={class:"border-b border-gray-200 dark:border-gray-600"},ds={class:"-mb-px flex space-x-8"},us=["onClick"],gs={key:0,class:"ml-2 inline-flex items-center rounded-full bg-indigo-100 px-2 py-0.5 text-xs font-medium text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300"},cs={class:"space-y-6"},xs={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},ps={class:"space-y-4"},ms={class:"flex items-center justify-between"},fs={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},ys=["disabled"],vs={class:"relative"},bs={class:"max-h-80 overflow-y-auto rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-gray-700"},ks={key:0,class:"p-8 text-center"},hs={key:1,class:"p-8 text-center"},ws={key:2,class:"divide-y divide-gray-200 dark:divide-gray-600"},$s={class:"flex items-center gap-3"},Cs={class:"font-medium text-gray-900 dark:text-gray-100"},_s={class:"text-sm text-gray-500 dark:text-gray-400"},As={class:"mt-1 flex items-center gap-2"},js={key:0,class:"inline-flex items-center rounded bg-blue-100 px-1.5 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},Ms=["disabled","onClick"],Gs={class:"space-y-4"},Us={class:"flex items-center justify-between"},Es={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Is=["disabled"],Ts={class:"max-h-80 overflow-y-auto rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-gray-700"},Fs={key:0,class:"p-8 text-center"},Vs={key:1,class:"p-8 text-center"},Ls={key:2,class:"divide-y divide-gray-200 dark:divide-gray-600"},Bs={class:"flex items-center gap-3"},Ds={class:"font-medium text-gray-900 dark:text-gray-100"},Ss={class:"text-sm text-gray-500 dark:text-gray-400"},Ns={class:"mt-1 flex items-center gap-2"},zs={key:0,class:"inline-flex items-center rounded bg-indigo-100 px-1.5 py-0.5 text-xs font-medium text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300"},Os={class:"flex items-center gap-2"},Ps={class:"flex items-center gap-1"},Rs=["onUpdate:modelValue","onChange"],qs=["disabled","onClick"],Ws={key:0,class:"flex gap-2 pt-2"},Ks=["disabled"],Qs={class:"mt-8 rounded-lg bg-gray-50 p-6 dark:bg-gray-700"},Ys={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Hs={class:"space-y-3"},Js={class:"flex items-center gap-3"},Xs={class:"flex items-center gap-3"},Zs={class:"rounded-lg bg-purple-50 p-4 dark:bg-purple-900/20"},er={class:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4"},tr={class:"font-medium text-purple-900 dark:text-purple-100"},sr={class:"font-medium text-purple-900 dark:text-purple-100"},rr={class:"font-medium text-purple-900 dark:text-purple-100"},ar={class:"font-medium text-purple-900 dark:text-purple-100"},or={class:"flex items-center justify-end rounded-b border-t border-solid border-gray-200 p-6 dark:border-gray-600"},lr={__name:"AccountAssignmentModal",props:{visible:{type:Boolean,required:!0},group:{type:Object,default:null}},emits:["close","updated"],setup(u,{emit:q}){const p=u,D=q,I=[{key:"claude",name:"Claude",icon:"fas fa-robot"},{key:"gemini",name:"Gemini",icon:"fas fa-gem"},{key:"openai",name:"OpenAI",icon:"fas fa-brain"}],l=h("claude"),v=h(!1),s=h(!1),T=h(null),M=h(null),k=h(!1),t=h(""),m=h({claude:[],gemini:[],openai:[]}),_=h({claude:[],gemini:[],openai:[]}),F=h({}),G=h({strategy:"round_robin",fallbackToGlobal:!0,healthCheckEnabled:!0,weights:{}}),z=H(()=>{const i=m.value[l.value]||[];if(!t.value)return i;const r=t.value.toLowerCase();return i.filter(j=>j.name&&j.name.toLowerCase().includes(r)||j.username&&j.username.toLowerCase().includes(r)||j.description&&j.description.toLowerCase().includes(r))}),V=H(()=>_.value[l.value]||[]),W=H(()=>Object.values(_.value).reduce((i,r)=>i+r.length,0)),S=i=>(_.value[i]||[]).length,O=i=>({claude:"bg-gradient-to-r from-blue-500 to-indigo-500",gemini:"bg-gradient-to-r from-green-500 to-teal-500",openai:"bg-gradient-to-r from-orange-500 to-red-500"})[i]||"bg-gray-500",y=i=>({claude:"fas fa-robot",gemini:"fas fa-gem",openai:"fas fa-brain"})[i]||"fas fa-server",o=async()=>{if(p.group){v.value=!0;try{const i={claude:"/admin/claude-accounts",gemini:"/admin/gemini-accounts",openai:"/admin/openai-accounts"}[l.value],r=await B.get(i,{params:{groupId:"ungrouped"}});if(r.success)m.value[l.value]=r.data||[];else throw new Error(r.message||"获取账户列表失败")}catch(i){console.error("Failed to load available accounts:",i),A.error(i.message||"加载可用账户失败"),m.value[l.value]=[]}finally{v.value=!1}}},L=async()=>{if(p.group){s.value=!0;try{const i=await B.get(`/admin/groups/${p.group.id}/accounts`);if(i.success){const r=i.data;_.value={claude:r.claudeAccounts||[],gemini:r.geminiAccounts||[],openai:r.openaiAccounts||[]},Object.values(_.value).flat().forEach(j=>{F.value[j.id]=j.weight||.5})}else throw new Error(i.message||"获取已分配账户失败")}catch(i){console.error("Failed to load assigned accounts:",i),A.error(i.message||"加载已分配账户失败")}finally{s.value=!1}}},b=async()=>{if(p.group)try{const i=await B.get(`/admin/groups/${p.group.id}`);i.success&&i.data.schedulingConfig&&(G.value={strategy:i.data.schedulingConfig.strategy||"round_robin",fallbackToGlobal:i.data.schedulingConfig.fallbackToGlobal!==!1,healthCheckEnabled:i.data.schedulingConfig.healthCheckEnabled!==!1,weights:i.data.schedulingConfig.weights||{}})}catch(i){console.error("Failed to load scheduling config:",i)}},N=async i=>{T.value=i.id;try{const r={};r[`${l.value}Accounts`]=[i.id];const j=await B.post(`/admin/groups/${p.group.id}/accounts`,{accounts:r});if(j.success)A.success(`账户 ${i.name||i.id} 已分配到组`),m.value[l.value]=m.value[l.value].filter(c=>c.id!==i.id),_.value[l.value].push(i),F.value[i.id]=.5,D("updated");else throw new Error(j.message||"分配账户失败")}catch(r){console.error("Failed to assign account:",r),A.error(r.message||"分配账户失败")}finally{T.value=null}},K=async i=>{M.value=i.id;try{const r={};r[`${l.value}Accounts`]=[i.id];const j=await B.delete(`/admin/groups/${p.group.id}/accounts`,{data:{accounts:r}});if(j.success)A.success(`账户 ${i.name||i.id} 已从组中移除`),_.value[l.value]=_.value[l.value].filter(c=>c.id!==i.id),m.value[l.value].push(i),delete F.value[i.id],D("updated");else throw new Error(j.message||"移除账户失败")}catch(r){console.error("Failed to unassign account:",r),A.error(r.message||"移除账户失败")}finally{M.value=null}},te=async i=>{try{const r=F.value[i.id];if(r<0||r>1){A.warning("权重值必须在0-1之间"),F.value[i.id]=i.weight||.5;return}const j={...G.value.weights};j[i.id]=r;const c=await B.put(`/admin/groups/${p.group.id}/scheduling`,{weights:j});if(c.success)G.value.weights=j,i.weight=r,A.success("权重更新成功");else throw new Error(c.message||"更新权重失败")}catch(r){console.error("Failed to update account weight:",r),A.error(r.message||"更新权重失败"),F.value[i.id]=i.weight||.5}},Q=async()=>{try{const i=await B.put(`/admin/groups/${p.group.id}/scheduling`,G.value);if(i.success)A.success("调度配置更新成功");else throw new Error(i.message||"更新调度配置失败")}catch(i){console.error("Failed to update scheduling config:",i),A.error(i.message||"更新调度配置失败")}},se=async()=>{try{await ge.confirm(`确定要移除组中所有 ${V.value.length} 个 ${l.value.toUpperCase()} 账户吗？`,"确认移除所有账户",{confirmButtonText:"确定移除",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"}),await U()}catch(i){i!=="cancel"&&console.error("Failed to confirm unassign all:",i)}},U=async()=>{k.value=!0;try{const i=V.value.map(c=>c.id),r={};r[`${l.value}Accounts`]=i;const j=await B.delete(`/admin/groups/${p.group.id}/accounts`,{data:{accounts:r}});if(j.success)A.success(`所有 ${l.value.toUpperCase()} 账户已从组中移除`),m.value[l.value].push(..._.value[l.value]),_.value[l.value]=[],i.forEach(c=>delete F.value[c]),D("updated");else throw new Error(j.message||"移除所有账户失败")}catch(i){console.error("Failed to unassign all accounts:",i),A.error(i.message||"移除所有账户失败")}finally{k.value=!1}};return re(()=>p.visible,i=>{i&&p.group&&(L(),o(),b())},{immediate:!0}),re(l,()=>{p.visible&&o(),t.value=""}),(i,r)=>{var j;return u.visible?(d(),g("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden outline-none focus:outline-none",onClick:r[6]||(r[6]=oe(c=>i.$emit("close"),["self"]))},[r[33]||(r[33]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",ts,[e("div",ss,[e("div",rs,[e("div",as,[r[8]||(r[8]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-r from-purple-500 to-pink-500"},[e("i",{class:"fas fa-server text-white"})],-1)),e("div",null,[r[7]||(r[7]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},"账户分配管理",-1)),e("p",os,' 管理组 "'+n((j=u.group)==null?void 0:j.name)+'" 的AI账户分配和调度配置 ',1)])]),e("button",{class:"float-right ml-auto border-0 bg-transparent p-1 text-3xl font-semibold leading-none text-gray-400 hover:text-gray-600 focus:outline-none dark:text-gray-500 dark:hover:text-gray-300",onClick:r[0]||(r[0]=c=>i.$emit("close"))},[...r[9]||(r[9]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",ls,[e("div",is,[e("div",ns,[e("nav",ds,[(d(),g(P,null,R(I,c=>e("button",{key:c.key,class:$(["border-b-2 px-1 py-2 text-sm font-medium transition-colors",l.value===c.key?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:ee=>l.value=c.key},[e("i",{class:$([c.icon,"mr-2"])},null,2),C(" "+n(c.name)+" ",1),S(c.key)>0?(d(),g("span",gs,n(S(c.key)),1)):w("",!0)],10,us)),64))])])]),e("div",cs,[e("div",xs,[e("div",ps,[e("div",ms,[e("h4",fs,[r[10]||(r[10]=e("i",{class:"fas fa-server mr-2 text-green-500"},null,-1)),C(" 可分配账户 ("+n(l.value.toUpperCase())+") ",1)]),e("button",{class:"text-sm text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",disabled:v.value,onClick:o},[e("i",{class:$(["fas mr-1",v.value?"fa-spinner fa-spin":"fa-sync-alt"])},null,2),r[11]||(r[11]=C(" 刷新 ",-1))],8,ys)]),e("div",vs,[r[12]||(r[12]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),E(e("input",{"onUpdate:modelValue":r[1]||(r[1]=c=>t.value=c),class:"w-full rounded-lg border border-gray-200 bg-white py-2 pl-10 pr-4 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",placeholder:"搜索账户...",type:"text"},null,512),[[ae,t.value]])]),e("div",bs,[v.value?(d(),g("div",ks,[...r[13]||(r[13]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-gray-400"},null,-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"加载中...",-1)])])):z.value.length===0?(d(),g("div",hs,[...r[14]||(r[14]=[e("i",{class:"fas fa-server text-3xl text-gray-300 dark:text-gray-500"},null,-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"没有可分配的账户",-1)])])):(d(),g("div",ws,[(d(!0),g(P,null,R(z.value,c=>(d(),g("div",{key:c.id,class:"flex items-center justify-between p-4 transition-colors hover:bg-gray-50 dark:hover:bg-gray-600"},[e("div",$s,[e("div",{class:$(["flex h-8 w-8 items-center justify-center rounded-full text-sm text-white",O(l.value)])},[e("i",{class:$(y(l.value))},null,2)],2),e("div",null,[e("div",Cs,n(c.name||c.username||c.id),1),e("div",_s,n(c.description||c.email||"No description"),1),e("div",As,[e("span",{class:$(["inline-flex items-center rounded px-1.5 py-0.5 text-xs font-medium",c.isActive||c.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"])},n(c.isActive||c.status==="active"?"活跃":"禁用"),3),c.accountType?(d(),g("span",js,n(c.accountType),1)):w("",!0)])])]),e("button",{class:"flex items-center gap-1 rounded-md bg-purple-500 px-3 py-1.5 text-sm text-white transition-colors hover:bg-purple-600 disabled:cursor-not-allowed disabled:opacity-50",disabled:T.value===c.id,onClick:ee=>N(c)},[e("i",{class:$(["fas",T.value===c.id?"fa-spinner fa-spin":"fa-plus"])},null,2),r[15]||(r[15]=C(" 分配 ",-1))],8,Ms)]))),128))]))])]),e("div",Gs,[e("div",Us,[e("h4",Es,[r[16]||(r[16]=e("i",{class:"fas fa-link mr-2 text-purple-500"},null,-1)),C(" 已分配账户 ("+n(S(l.value))+") ",1)]),e("button",{class:"text-sm text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",disabled:s.value,onClick:L},[e("i",{class:$(["fas mr-1",s.value?"fa-spinner fa-spin":"fa-sync-alt"])},null,2),r[17]||(r[17]=C(" 刷新 ",-1))],8,Is)]),e("div",Ts,[s.value?(d(),g("div",Fs,[...r[18]||(r[18]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-gray-400"},null,-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"加载中...",-1)])])):V.value.length===0?(d(),g("div",Vs,[...r[19]||(r[19]=[e("i",{class:"fas fa-unlink text-3xl text-gray-300 dark:text-gray-500"},null,-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"暂无分配的账户",-1)])])):(d(),g("div",Ls,[(d(!0),g(P,null,R(V.value,c=>(d(),g("div",{key:c.id,class:"flex items-center justify-between p-4 transition-colors hover:bg-gray-50 dark:hover:bg-gray-600"},[e("div",Bs,[e("div",{class:$(["flex h-8 w-8 items-center justify-center rounded-full text-sm text-white",O(l.value)])},[e("i",{class:$(y(l.value))},null,2)],2),e("div",null,[e("div",Ds,n(c.name||c.username||c.id),1),e("div",Ss,n(c.description||c.email||"No description"),1),e("div",Ns,[e("span",{class:$(["inline-flex items-center rounded px-1.5 py-0.5 text-xs font-medium",c.isActive||c.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"])},n(c.isActive||c.status==="active"?"活跃":"禁用"),3),c.weight!==void 0?(d(),g("span",zs," 权重: "+n(c.weight),1)):w("",!0)])])]),e("div",Os,[e("div",Ps,[r[20]||(r[20]=e("span",{class:"text-xs text-gray-500"},"权重:",-1)),E(e("input",{"onUpdate:modelValue":ee=>F.value[c.id]=ee,class:"w-16 rounded border border-gray-300 px-2 py-1 text-xs focus:ring-1 focus:ring-indigo-500 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-200",max:"1",min:"0",step:"0.1",type:"number",onChange:ee=>te(c)},null,40,Rs),[[ae,F.value[c.id],void 0,{number:!0}]])]),e("button",{class:"flex items-center gap-1 rounded-md bg-red-500 px-3 py-1.5 text-sm text-white transition-colors hover:bg-red-600 disabled:cursor-not-allowed disabled:opacity-50",disabled:M.value===c.id,onClick:ee=>K(c)},[e("i",{class:$(["fas",M.value===c.id?"fa-spinner fa-spin":"fa-minus"])},null,2),r[21]||(r[21]=C(" 移除 ",-1))],8,qs)])]))),128))]))]),V.value.length>0?(d(),g("div",Ws,[e("button",{class:"flex items-center gap-1 rounded-md bg-red-500 px-3 py-2 text-sm text-white transition-colors hover:bg-red-600 disabled:cursor-not-allowed disabled:opacity-50",disabled:k.value,onClick:se},[e("i",{class:$(["fas",k.value?"fa-spinner fa-spin":"fa-unlink"])},null,2),r[22]||(r[22]=C(" 移除所有账户 ",-1))],8,Ks)])):w("",!0)])]),e("div",Qs,[r[27]||(r[27]=e("div",{class:"mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-cogs text-indigo-500"}),e("h4",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"调度配置")],-1)),e("div",Ys,[e("div",null,[r[24]||(r[24]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," 调度策略 ",-1)),E(e("select",{"onUpdate:modelValue":r[2]||(r[2]=c=>G.value.strategy=c),class:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-200",onChange:Q},[...r[23]||(r[23]=[ve('<option value="round_robin" data-v-fe52ef7e>轮询 (Round Robin)</option><option value="random" data-v-fe52ef7e>随机 (Random)</option><option value="weighted" data-v-fe52ef7e>权重 (Weighted)</option><option value="priority" data-v-fe52ef7e>优先级 (Priority)</option><option value="least_recent" data-v-fe52ef7e>最少使用 (Least Recent)</option>',5)])],544),[[le,G.value.strategy]])]),e("div",Hs,[e("label",Js,[E(e("input",{"onUpdate:modelValue":r[3]||(r[3]=c=>G.value.fallbackToGlobal=c),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox",onChange:Q},null,544),[[Y,G.value.fallbackToGlobal]]),r[25]||(r[25]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"回退到全局账户",-1))]),e("label",Xs,[E(e("input",{"onUpdate:modelValue":r[4]||(r[4]=c=>G.value.healthCheckEnabled=c),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",type:"checkbox",onChange:Q},null,544),[[Y,G.value.healthCheckEnabled]]),r[26]||(r[26]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"启用健康检查",-1))])])])]),e("div",Zs,[r[32]||(r[32]=e("div",{class:"mb-2 flex items-center gap-2"},[e("i",{class:"fas fa-chart-bar text-purple-500"}),e("span",{class:"font-medium text-purple-900 dark:text-purple-100"},"账户分配统计")],-1)),e("div",er,[e("div",null,[r[28]||(r[28]=e("span",{class:"text-purple-600 dark:text-purple-300"},"Claude:",-1)),e("span",tr,n(S("claude")),1)]),e("div",null,[r[29]||(r[29]=e("span",{class:"text-purple-600 dark:text-purple-300"},"Gemini:",-1)),e("span",sr,n(S("gemini")),1)]),e("div",null,[r[30]||(r[30]=e("span",{class:"text-purple-600 dark:text-purple-300"},"OpenAI:",-1)),e("span",rr,n(S("openai")),1)]),e("div",null,[r[31]||(r[31]=e("span",{class:"text-purple-600 dark:text-purple-300"},"总计:",-1)),e("span",ar,n(W.value),1)])])])])]),e("div",or,[e("button",{class:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",type:"button",onClick:r[5]||(r[5]=c=>i.$emit("close"))}," 关闭 ")])])])])):w("",!0)}}},ir=ie(lr,[["__scopeId","data-v-fe52ef7e"]]),nr={class:"relative z-50 mx-auto my-6 w-full max-w-4xl p-4"},dr={class:"relative flex w-full flex-col rounded-lg border-0 bg-white shadow-lg outline-none focus:outline-none dark:bg-gray-800"},ur={class:"flex items-start justify-between rounded-t border-b border-solid border-gray-200 p-5 dark:border-gray-600"},gr={class:"flex items-center gap-3"},cr={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},xr={class:"relative flex-auto p-6"},pr={key:0,class:"p-8 text-center"},mr={key:1,class:"space-y-6"},fr={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},yr={class:"space-y-4"},vr={class:"space-y-3"},br={class:"flex items-start justify-between"},kr={class:"font-mono text-sm text-gray-900 dark:text-gray-100"},hr={class:"flex items-start justify-between"},wr={class:"text-sm text-gray-900 dark:text-gray-100"},$r={key:0,class:"flex items-start justify-between"},Cr={class:"max-w-60 text-right text-sm text-gray-900 dark:text-gray-100"},_r={class:"flex items-start justify-between"},Ar={class:"flex items-start justify-between"},jr={class:"text-sm text-gray-900 dark:text-gray-100"},Mr={class:"flex items-start justify-between"},Gr={class:"text-sm text-gray-900 dark:text-gray-100"},Ur={class:"space-y-4"},Er={class:"space-y-3"},Ir={key:0,class:"rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20"},Tr={class:"text-sm text-blue-700 dark:text-blue-300"},Fr={key:1,class:"rounded-lg bg-green-50 p-3 dark:bg-green-900/20"},Vr={class:"mb-2 flex items-center gap-2"},Lr={class:"text-sm font-medium text-green-900 dark:text-green-100"},Br={class:"space-y-1"},Dr={key:2,class:"rounded-lg bg-gray-50 p-3 text-center dark:bg-gray-700"},Sr={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},Nr={class:"rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 p-4 dark:from-blue-900/20 dark:to-indigo-900/20"},zr={class:"flex items-center gap-3"},Or={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},Pr={class:"rounded-lg bg-gradient-to-r from-purple-50 to-pink-50 p-4 dark:from-purple-900/20 dark:to-pink-900/20"},Rr={class:"flex items-center gap-3"},qr={class:"text-2xl font-bold text-purple-900 dark:text-purple-100"},Wr={class:"rounded-lg bg-gradient-to-r from-green-50 to-teal-50 p-4 dark:from-green-900/20 dark:to-teal-900/20"},Kr={class:"flex items-center gap-3"},Qr={class:"text-sm font-medium text-green-900 dark:text-green-100"},Yr={class:"space-y-4"},Hr={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4"},Jr={class:"rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},Xr={class:"space-y-1 text-sm"},Zr={class:"flex items-center gap-2"},ea={class:"flex items-center gap-2"},ta={class:"rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},sa={class:"space-y-1 text-sm"},ra={class:"flex items-center gap-2"},aa={class:"rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},oa={class:"space-y-1 text-sm"},la={class:"flex items-center gap-2"},ia={class:"rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},na={class:"space-y-1 text-sm"},da={class:"flex items-center gap-2"},ua={class:"flex items-center gap-2"},ga={key:0,class:"space-y-4"},ca={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},xa={key:0,class:"rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20"},pa={class:"mb-3 flex items-center gap-2"},ma={class:"font-medium text-blue-900 dark:text-blue-100"},fa={class:"space-y-1 text-sm"},ya={key:0,class:"text-blue-600 dark:text-blue-400"},va={key:1,class:"rounded-lg bg-green-50 p-4 dark:bg-green-900/20"},ba={class:"mb-3 flex items-center gap-2"},ka={class:"font-medium text-green-900 dark:text-green-100"},ha={class:"space-y-1 text-sm"},wa={key:0,class:"text-green-600 dark:text-green-400"},$a={key:2,class:"rounded-lg bg-orange-50 p-4 dark:bg-orange-900/20"},Ca={class:"mb-3 flex items-center gap-2"},_a={class:"font-medium text-orange-900 dark:text-orange-100"},Aa={class:"space-y-1 text-sm"},ja={key:0,class:"text-orange-600 dark:text-orange-400"},Ma={class:"space-y-4"},Ga={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Ua={class:"space-y-3"},Ea={class:"flex items-center justify-between"},Ia={class:"text-sm text-gray-900 dark:text-gray-100"},Ta={class:"flex items-center justify-between"},Fa={class:"flex items-center justify-between"},Va={key:0,class:"space-y-2"},La={class:"max-h-32 space-y-1 overflow-y-auto"},Ba={class:"font-mono text-gray-600 dark:text-gray-400"},Da={class:"font-medium"},Sa={class:"flex items-center justify-between rounded-b border-t border-solid border-gray-200 p-6 dark:border-gray-600"},Na={class:"flex gap-3"},za={__name:"GroupDetailsModal",props:{visible:{type:Boolean,required:!0},group:{type:Object,default:null}},emits:["close","edit","manage-members","assign-accounts"],setup(u,{emit:q}){const p=u,D=v=>v?new Date(v).toLocaleString("zh-CN"):"N/A",I=v=>({round_robin:"轮询",random:"随机",weighted:"权重",priority:"优先级",least_recent:"最少使用"})[v]||v||"未配置",l=()=>{var v,s,T,M;return(v=p.group)!=null&&v.accounts?(((s=p.group.accounts.claudeAccounts)==null?void 0:s.length)||0)+(((T=p.group.accounts.geminiAccounts)==null?void 0:T.length)||0)+(((M=p.group.accounts.openaiAccounts)==null?void 0:M.length)||0):0};return(v,s)=>{var T,M,k,t,m,_,F,G,z,V,W,S,O,y,o,L,b,N,K,te,Q,se;return u.visible?(d(),g("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden outline-none focus:outline-none",onClick:s[5]||(s[5]=oe(U=>v.$emit("close"),["self"]))},[s[50]||(s[50]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",nr,[e("div",dr,[e("div",ur,[e("div",gr,[s[7]||(s[7]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500"},[e("i",{class:"fas fa-users text-lg text-white"})],-1)),e("div",null,[e("h3",cr,n((T=u.group)==null?void 0:T.name),1),s[6]||(s[6]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"组详情和配置信息",-1))])]),e("button",{class:"float-right ml-auto border-0 bg-transparent p-1 text-3xl font-semibold leading-none text-gray-400 hover:text-gray-600 focus:outline-none dark:text-gray-500 dark:hover:text-gray-300",onClick:s[0]||(s[0]=U=>v.$emit("close"))},[...s[8]||(s[8]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",xr,[u.group?(d(),g("div",mr,[e("div",fr,[e("div",yr,[s[16]||(s[16]=e("h4",{class:"border-b border-gray-200 pb-2 text-lg font-medium text-gray-900 dark:border-gray-600 dark:text-gray-100"},[e("i",{class:"fas fa-info-circle mr-2 text-blue-500"}),C(" 基本信息 ")],-1)),e("div",vr,[e("div",br,[s[10]||(s[10]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"组ID:",-1)),e("span",kr,n(u.group.id),1)]),e("div",hr,[s[11]||(s[11]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"组名称:",-1)),e("span",wr,n(u.group.name),1)]),u.group.description?(d(),g("div",$r,[s[12]||(s[12]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"描述:",-1)),e("span",Cr,n(u.group.description),1)])):w("",!0),e("div",_r,[s[13]||(s[13]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"状态:",-1)),e("span",{class:$(["inline-flex items-center rounded-full px-2 py-1 text-xs font-medium",u.group.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"])},[e("i",{class:$(["fas mr-1",u.group.isActive?"fa-check-circle":"fa-times-circle"])},null,2),C(" "+n(u.group.isActive?"激活":"禁用"),1)],2)]),e("div",Ar,[s[14]||(s[14]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"创建时间:",-1)),e("span",jr,n(D(u.group.createdAt)),1)]),e("div",Mr,[s[15]||(s[15]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"更新时间:",-1)),e("span",Gr,n(D(u.group.updatedAt)),1)])])]),e("div",Ur,[s[20]||(s[20]=e("h4",{class:"border-b border-gray-200 pb-2 text-lg font-medium text-gray-900 dark:border-gray-600 dark:text-gray-100"},[e("i",{class:"fas fa-sitemap mr-2 text-green-500"}),C(" 层级关系 ")],-1)),e("div",Er,[u.group.parentId?(d(),g("div",Ir,[s[17]||(s[17]=e("div",{class:"mb-2 flex items-center gap-2"},[e("i",{class:"fas fa-arrow-up text-blue-500"}),e("span",{class:"text-sm font-medium text-blue-900 dark:text-blue-100"},"父组")],-1)),e("div",Tr,n(((M=u.group.parentGroup)==null?void 0:M.name)||"未知父组"),1)])):w("",!0),u.group.childGroups&&u.group.childGroups.length>0?(d(),g("div",Fr,[e("div",Vr,[s[18]||(s[18]=e("i",{class:"fas fa-arrow-down text-green-500"},null,-1)),e("span",Lr,"子组 ("+n(u.group.childGroups.length)+")",1)]),e("div",Br,[(d(!0),g(P,null,R(u.group.childGroups,U=>(d(),g("div",{key:U.id,class:"text-sm text-green-700 dark:text-green-300"},n(U.name),1))),128))])])):w("",!0),!u.group.parentId&&(!u.group.childGroups||u.group.childGroups.length===0)?(d(),g("div",Dr,[...s[19]||(s[19]=[e("i",{class:"fas fa-layer-group mb-2 text-lg text-gray-400"},null,-1),e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"独立组",-1)])])):w("",!0)])])]),e("div",Sr,[e("div",Nr,[e("div",zr,[s[22]||(s[22]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-500"},[e("i",{class:"fas fa-users text-white"})],-1)),e("div",null,[e("div",Or,n(u.group.memberCount||((k=u.group.members)==null?void 0:k.length)||0),1),s[21]||(s[21]=e("div",{class:"text-sm text-blue-600 dark:text-blue-300"},"成员",-1))])])]),e("div",Pr,[e("div",Rr,[s[24]||(s[24]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-purple-500"},[e("i",{class:"fas fa-server text-white"})],-1)),e("div",null,[e("div",qr,n(u.group.accountCount||l()),1),s[23]||(s[23]=e("div",{class:"text-sm text-purple-600 dark:text-purple-300"},"账户",-1))])])]),e("div",Wr,[e("div",Kr,[s[26]||(s[26]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-500"},[e("i",{class:"fas fa-cogs text-white"})],-1)),e("div",null,[e("div",Qr,n(I((t=u.group.schedulingConfig)==null?void 0:t.strategy)),1),s[25]||(s[25]=e("div",{class:"text-sm text-green-600 dark:text-green-300"},"调度策略",-1))])])])]),e("div",Yr,[s[37]||(s[37]=e("h4",{class:"border-b border-gray-200 pb-2 text-lg font-medium text-gray-900 dark:border-gray-600 dark:text-gray-100"},[e("i",{class:"fas fa-shield-alt mr-2 text-green-500"}),C(" 权限配置 ")],-1)),e("div",Hr,[e("div",Jr,[s[29]||(s[29]=e("h5",{class:"mb-2 font-medium text-gray-900 dark:text-gray-100"},"聊天权限",-1)),e("div",Xr,[e("div",Zr,[e("i",{class:$(["fas",(m=u.group.permissions)!=null&&m["chat.create"]?"fa-check text-green-500":"fa-times text-red-500"])},null,2),s[27]||(s[27]=e("span",{class:"text-gray-700 dark:text-gray-300"},"创建聊天",-1))]),e("div",ea,[e("i",{class:$(["fas",(_=u.group.permissions)!=null&&_["chat.history"]?"fa-check text-green-500":"fa-times text-red-500"])},null,2),s[28]||(s[28]=e("span",{class:"text-gray-700 dark:text-gray-300"},"查看历史",-1))])])]),e("div",ta,[s[31]||(s[31]=e("h5",{class:"mb-2 font-medium text-gray-900 dark:text-gray-100"},"模型权限",-1)),e("div",sa,[e("div",ra,[e("i",{class:$(["fas",(F=u.group.permissions)!=null&&F["models.list"]?"fa-check text-green-500":"fa-times text-red-500"])},null,2),s[30]||(s[30]=e("span",{class:"text-gray-700 dark:text-gray-300"},"列出模型",-1))])])]),e("div",aa,[s[33]||(s[33]=e("h5",{class:"mb-2 font-medium text-gray-900 dark:text-gray-100"},"使用统计",-1)),e("div",oa,[e("div",la,[e("i",{class:$(["fas",(G=u.group.permissions)!=null&&G["usage.view"]?"fa-check text-green-500":"fa-times text-red-500"])},null,2),s[32]||(s[32]=e("span",{class:"text-gray-700 dark:text-gray-300"},"查看使用量",-1))])])]),e("div",ia,[s[36]||(s[36]=e("h5",{class:"mb-2 font-medium text-gray-900 dark:text-gray-100"},"管理权限",-1)),e("div",na,[e("div",da,[e("i",{class:$(["fas",(z=u.group.permissions)!=null&&z["admin.read"]?"fa-check text-green-500":"fa-times text-red-500"])},null,2),s[34]||(s[34]=e("span",{class:"text-gray-700 dark:text-gray-300"},"只读管理",-1))]),e("div",ua,[e("i",{class:$(["fas",(V=u.group.permissions)!=null&&V["admin.write"]?"fa-check text-green-500":"fa-times text-red-500"])},null,2),s[35]||(s[35]=e("span",{class:"text-gray-700 dark:text-gray-300"},"管理写入",-1))])])])])]),u.group.accounts&&((W=u.group.accounts.claudeAccounts)!=null&&W.length||(S=u.group.accounts.geminiAccounts)!=null&&S.length||(O=u.group.accounts.openaiAccounts)!=null&&O.length)?(d(),g("div",ga,[s[41]||(s[41]=e("h4",{class:"border-b border-gray-200 pb-2 text-lg font-medium text-gray-900 dark:border-gray-600 dark:text-gray-100"},[e("i",{class:"fas fa-server mr-2 text-purple-500"}),C(" 账户分配 ")],-1)),e("div",ca,[(y=u.group.accounts.claudeAccounts)!=null&&y.length?(d(),g("div",xa,[e("div",pa,[s[38]||(s[38]=e("i",{class:"fas fa-robot text-blue-500"},null,-1)),e("span",ma,"Claude ("+n(u.group.accounts.claudeAccounts.length)+")",1)]),e("div",fa,[(d(!0),g(P,null,R(u.group.accounts.claudeAccounts.slice(0,3),U=>(d(),g("div",{key:U,class:"font-mono text-blue-700 dark:text-blue-300"},n(U.slice(0,8))+"... ",1))),128)),u.group.accounts.claudeAccounts.length>3?(d(),g("div",ya," 还有 "+n(u.group.accounts.claudeAccounts.length-3)+" 个... ",1)):w("",!0)])])):w("",!0),(o=u.group.accounts.geminiAccounts)!=null&&o.length?(d(),g("div",va,[e("div",ba,[s[39]||(s[39]=e("i",{class:"fas fa-gem text-green-500"},null,-1)),e("span",ka,"Gemini ("+n(u.group.accounts.geminiAccounts.length)+")",1)]),e("div",ha,[(d(!0),g(P,null,R(u.group.accounts.geminiAccounts.slice(0,3),U=>(d(),g("div",{key:U,class:"font-mono text-green-700 dark:text-green-300"},n(U.slice(0,8))+"... ",1))),128)),u.group.accounts.geminiAccounts.length>3?(d(),g("div",wa," 还有 "+n(u.group.accounts.geminiAccounts.length-3)+" 个... ",1)):w("",!0)])])):w("",!0),(L=u.group.accounts.openaiAccounts)!=null&&L.length?(d(),g("div",$a,[e("div",Ca,[s[40]||(s[40]=e("i",{class:"fas fa-brain text-orange-500"},null,-1)),e("span",_a,"OpenAI ("+n(u.group.accounts.openaiAccounts.length)+")",1)]),e("div",Aa,[(d(!0),g(P,null,R(u.group.accounts.openaiAccounts.slice(0,3),U=>(d(),g("div",{key:U,class:"font-mono text-orange-700 dark:text-orange-300"},n(U.slice(0,8))+"... ",1))),128)),u.group.accounts.openaiAccounts.length>3?(d(),g("div",ja," 还有 "+n(u.group.accounts.openaiAccounts.length-3)+" 个... ",1)):w("",!0)])])):w("",!0)])])):w("",!0),e("div",Ma,[s[46]||(s[46]=e("h4",{class:"border-b border-gray-200 pb-2 text-lg font-medium text-gray-900 dark:border-gray-600 dark:text-gray-100"},[e("i",{class:"fas fa-cogs mr-2 text-indigo-500"}),C(" 调度配置 ")],-1)),e("div",Ga,[e("div",Ua,[e("div",Ea,[s[42]||(s[42]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"策略:",-1)),e("span",Ia,n(I((b=u.group.schedulingConfig)==null?void 0:b.strategy)),1)]),e("div",Ta,[s[43]||(s[43]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"回退到全局:",-1)),e("span",{class:$(["inline-flex items-center rounded px-2 py-1 text-xs font-medium",((N=u.group.schedulingConfig)==null?void 0:N.fallbackToGlobal)!==!1?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"])},n(((K=u.group.schedulingConfig)==null?void 0:K.fallbackToGlobal)!==!1?"启用":"禁用"),3)]),e("div",Fa,[s[44]||(s[44]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"健康检查:",-1)),e("span",{class:$(["inline-flex items-center rounded px-2 py-1 text-xs font-medium",((te=u.group.schedulingConfig)==null?void 0:te.healthCheckEnabled)!==!1?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"])},n(((Q=u.group.schedulingConfig)==null?void 0:Q.healthCheckEnabled)!==!1?"启用":"禁用"),3)])]),(se=u.group.schedulingConfig)!=null&&se.weights&&Object.keys(u.group.schedulingConfig.weights).length?(d(),g("div",Va,[s[45]||(s[45]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"权重配置:",-1)),e("div",La,[(d(!0),g(P,null,R(u.group.schedulingConfig.weights,(U,i)=>(d(),g("div",{key:i,class:"flex items-center justify-between rounded bg-gray-100 p-2 text-xs dark:bg-gray-600"},[e("span",Ba,n(i.slice(0,8))+"...",1),e("span",Da,n(U),1)]))),128))])])):w("",!0)])])])):(d(),g("div",pr,[...s[9]||(s[9]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-gray-400"},null,-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"加载中...",-1)])]))]),e("div",Sa,[e("div",Na,[e("button",{class:"flex items-center gap-2 rounded-lg bg-indigo-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-600",onClick:s[1]||(s[1]=U=>v.$emit("edit",u.group))},[...s[47]||(s[47]=[e("i",{class:"fas fa-edit"},null,-1),C(" 编辑组 ",-1)])]),e("button",{class:"flex items-center gap-2 rounded-lg bg-blue-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600",onClick:s[2]||(s[2]=U=>v.$emit("manage-members",u.group))},[...s[48]||(s[48]=[e("i",{class:"fas fa-users"},null,-1),C(" 管理成员 ",-1)])]),e("button",{class:"flex items-center gap-2 rounded-lg bg-purple-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-purple-600",onClick:s[3]||(s[3]=U=>v.$emit("assign-accounts",u.group))},[...s[49]||(s[49]=[e("i",{class:"fas fa-server"},null,-1),C(" 分配账户 ",-1)])])]),e("button",{class:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",type:"button",onClick:s[4]||(s[4]=U=>v.$emit("close"))}," 关闭 ")])])])])):w("",!0)}}},Oa=ie(za,[["__scopeId","data-v-6579b918"]]),Pa={class:"groups-container"},Ra={class:"card p-4 sm:p-6"},qa={class:"mb-4 flex flex-col gap-4 sm:mb-6"},Wa={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Ka={class:"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-center sm:gap-3"},Qa={class:"relative min-w-[200px]"},Ya={class:"group relative min-w-[160px]"},Ha={class:"group relative min-w-[140px]"},Ja={class:"relative"},Xa=["disabled"],Za={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow dark:border-gray-600 dark:bg-gray-800"},eo={class:"overflow-x-auto"},to={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},so={class:"divide-y divide-gray-200 bg-white dark:divide-gray-600 dark:bg-gray-800"},ro={key:0},ao={key:1},oo={class:"whitespace-nowrap px-6 py-4"},lo={class:"flex items-center"},io={class:"ml-4"},no={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},uo={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},go={class:"text-xs text-gray-400 dark:text-gray-500"},co={class:"whitespace-nowrap px-6 py-4"},xo={class:"flex flex-col gap-1"},po={key:0,class:"flex items-center gap-1 text-xs"},mo={class:"text-gray-600 dark:text-gray-400"},fo={key:1,class:"flex items-center gap-1 text-xs"},yo={class:"text-gray-600 dark:text-gray-400"},vo={key:2,class:"text-xs text-gray-400"},bo={class:"whitespace-nowrap px-6 py-4"},ko={class:"flex items-center gap-2"},ho={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},wo={class:"whitespace-nowrap px-6 py-4"},$o={class:"flex flex-col gap-1"},Co={class:"flex items-center gap-2"},_o={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Ao={class:"flex gap-1"},jo={key:0,class:"rounded bg-blue-100 px-1.5 py-0.5 text-xs text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"},Mo={key:1,class:"rounded bg-green-100 px-1.5 py-0.5 text-xs text-green-700 dark:bg-green-900/30 dark:text-green-300"},Go={key:2,class:"rounded bg-orange-100 px-1.5 py-0.5 text-xs text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"},Uo={class:"whitespace-nowrap px-6 py-4"},Eo={class:"flex items-center gap-2"},Io={class:"text-sm text-gray-900 dark:text-gray-100"},To={class:"whitespace-nowrap px-6 py-4"},Fo={class:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium"},Vo={class:"flex items-center justify-end gap-2"},Lo=["onClick"],Bo=["onClick"],Do=["onClick"],So=["onClick"],No=["disabled","onClick"],zo={key:0,class:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 dark:border-gray-600 dark:bg-gray-800 sm:px-6"},Oo={class:"flex flex-1 justify-between sm:hidden"},Po=["disabled"],Ro=["disabled"],qo={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},Wo={class:"text-sm text-gray-700 dark:text-gray-300"},Ko={class:"font-medium"},Qo={class:"font-medium"},Yo={class:"font-medium"},Ho={"aria-label":"Pagination",class:"relative z-0 inline-flex -space-x-px rounded-md shadow-sm"},Jo=["disabled"],Xo=["onClick"],Zo=["disabled"],el={__name:"GroupList",setup(u){const q=h(!1),p=h([]),D=h(""),I=h("all"),l=h("all"),v=h(1),s=h(20),T=h(0),M=h(!1),k=h(!1),t=h(!1),m=h(!1),_=h(null),F=H(()=>{let f=[...p.value];if(D.value){const a=D.value.toLowerCase();f=f.filter(x=>x.name.toLowerCase().includes(a)||x.description&&x.description.toLowerCase().includes(a))}return I.value==="root"?f=f.filter(a=>!a.parentId):I.value==="child"&&(f=f.filter(a=>a.parentId)),l.value==="active"?f=f.filter(a=>a.isActive):l.value==="inactive"&&(f=f.filter(a=>!a.isActive)),f}),G=H(()=>Math.ceil(F.value.length/s.value)),z=H(()=>{const f=G.value,a=v.value,x=2;let J=[],X=[];for(let Z=Math.max(2,a-x);Z<=Math.min(f-1,a+x);Z++)J.push(Z);return a-x>2?X.push(1,"..."):X.push(1),X.push(...J),a+x<f-1?X.push("...",f):X.push(f),X.filter(Z=>typeof Z=="number")}),V=async()=>{q.value=!0;try{const f=await B.get("/admin/groups",{params:{page:v.value,limit:s.value,includeInactive:!0}});if(f.success)p.value=f.data.groups,T.value=f.data.pagination.total;else throw new Error(f.message||"获取组列表失败")}catch(f){console.error("Failed to load groups:",f),A.error(f.message||"获取组列表失败")}finally{q.value=!1}},W=we(()=>{v.value=1},300),S=()=>{v.value=1},O=f=>{f>=1&&f<=G.value&&(v.value=f)},y=f=>{const a=p.value.find(x=>x.id===f);return a?a.name:"Unknown"},o=f=>({round_robin:"轮询",random:"随机",weighted:"权重",priority:"优先级",least_recent:"最少使用"})[f]||f,L=()=>{_.value=null,M.value=!0},b=f=>{_.value={...f},M.value=!0},N=()=>{M.value=!1,_.value=null},K=()=>{N(),V()},te=f=>{_.value=f,m.value=!0},Q=()=>{m.value=!1,_.value=null},se=f=>{Q(),ue(()=>{b(f)})},U=f=>{_.value=f,k.value=!0},i=f=>{Q(),ue(()=>{U(f)})},r=()=>{k.value=!1,_.value=null},j=()=>{r(),V()},c=f=>{_.value=f,t.value=!0},ee=f=>{Q(),ue(()=>{c(f)})},ce=()=>{t.value=!1,_.value=null},be=()=>{ce(),V()},ke=async f=>{if(f.memberCount>0){A.warning("该组还有成员，无法删除");return}if(f.childCount>0){A.warning("该组还有子组，无法删除");return}try{await ge.confirm(`确定要删除组 "${f.name}" 吗？此操作不可逆。`,"确认删除",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"});const a=await B.delete(`/admin/groups/${f.id}`);if(a.success)A.success("组删除成功"),V();else throw new Error(a.message||"删除失败")}catch(a){a!=="cancel"&&(console.error("Failed to delete group:",a),A.error(a.message||"删除组失败"))}};return he(()=>{V()}),(f,a)=>(d(),g("div",Pa,[e("div",Ra,[e("div",qa,[a[16]||(a[16]=e("div",null,[e("h3",{class:"mb-1 text-lg font-bold text-gray-900 dark:text-gray-100 sm:mb-2 sm:text-xl"}," 用户组管理 "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 sm:text-base"}," 管理用户组、成员分配、权限配置和账户调度策略 ")],-1)),e("div",Wa,[e("div",Ka,[e("div",Qa,[a[8]||(a[8]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),E(e("input",{"onUpdate:modelValue":a[0]||(a[0]=x=>D.value=x),class:"w-full rounded-lg border border-gray-200 bg-white py-2 pl-10 pr-4 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:placeholder-gray-400",placeholder:"搜索组名或描述...",type:"text",onInput:a[1]||(a[1]=(...x)=>ye(W)&&ye(W)(...x))},null,544),[[ae,D.value]])]),e("div",Ya,[a[10]||(a[10]=e("div",{class:"absolute -inset-0.5 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 opacity-0 blur transition duration-300 group-hover:opacity-20"},null,-1)),E(e("select",{"onUpdate:modelValue":a[2]||(a[2]=x=>I.value=x),class:"relative w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200",onChange:S},[...a[9]||(a[9]=[e("option",{value:"all"},"所有组",-1),e("option",{value:"root"},"顶级组",-1),e("option",{value:"child"},"子组",-1)])],544),[[le,I.value]])]),e("div",Ha,[a[12]||(a[12]=e("div",{class:"absolute -inset-0.5 rounded-lg bg-gradient-to-r from-green-500 to-teal-500 opacity-0 blur transition duration-300 group-hover:opacity-20"},null,-1)),E(e("select",{"onUpdate:modelValue":a[3]||(a[3]=x=>l.value=x),class:"relative w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-gray-700 focus:border-green-500 focus:ring-2 focus:ring-green-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200",onChange:S},[...a[11]||(a[11]=[e("option",{value:"all"},"所有状态",-1),e("option",{value:"active"},"激活",-1),e("option",{value:"inactive"},"禁用",-1)])],544),[[le,l.value]])]),e("div",Ja,[e("button",{class:"group relative flex items-center justify-center gap-2 rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition-all duration-200 hover:border-gray-300 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:border-gray-500",disabled:q.value,onClick:V},[a[13]||(a[13]=e("div",{class:"absolute -inset-0.5 rounded-lg bg-gradient-to-r from-indigo-500 to-blue-500 opacity-0 blur transition duration-300 group-hover:opacity-20"},null,-1)),e("i",{class:$(["fas relative text-indigo-500",q.value?"fa-spinner fa-spin":"fa-sync-alt"])},null,2),a[14]||(a[14]=e("span",{class:"relative"},"刷新",-1))],8,Xa)])]),e("button",{class:"flex w-full items-center justify-center gap-2 rounded-lg bg-gradient-to-r from-green-500 to-green-600 px-5 py-2.5 text-sm font-medium text-white shadow-md transition-all duration-200 hover:from-green-600 hover:to-green-700 hover:shadow-lg sm:w-auto",onClick:L},[...a[15]||(a[15]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"创建组",-1)])])])]),e("div",Za,[e("div",eo,[e("table",to,[a[33]||(a[33]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," 组信息 "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," 层级关系 "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," 成员统计 "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," 账户配置 "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," 调度策略 "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," 状态 "),e("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," 操作 ")])],-1)),e("tbody",so,[q.value?(d(),g("tr",ro,[...a[17]||(a[17]=[e("td",{class:"px-6 py-12 text-center",colspan:"7"},[e("div",{class:"flex flex-col items-center gap-2"},[e("i",{class:"fas fa-spinner fa-spin text-2xl text-gray-400"}),e("span",{class:"text-gray-500 dark:text-gray-400"},"加载中...")])],-1)])])):F.value.length===0?(d(),g("tr",ao,[e("td",{class:"px-6 py-12 text-center",colspan:"7"},[e("div",{class:"flex flex-col items-center gap-2"},[a[18]||(a[18]=e("i",{class:"fas fa-users text-4xl text-gray-300 dark:text-gray-500"},null,-1)),a[19]||(a[19]=e("span",{class:"text-gray-500 dark:text-gray-400"},"暂无组数据",-1)),e("button",{class:"mt-2 text-sm text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",onClick:L}," 创建第一个组 ")])])])):(d(!0),g(P,{key:2},R(F.value,x=>{var J,X,Z,xe,pe,me,fe;return d(),g("tr",{key:x.id,class:"transition-colors hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",oo,[e("div",lo,[a[20]||(a[20]=e("div",{class:"h-10 w-10 flex-shrink-0"},[e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500"},[e("i",{class:"fas fa-users text-sm text-white"})])],-1)),e("div",io,[e("div",no,n(x.name),1),x.description?(d(),g("div",uo,n(x.description),1)):w("",!0),e("div",go," ID: "+n(x.id.slice(0,8))+"... ",1)])])]),e("td",co,[e("div",xo,[x.parentId?(d(),g("div",po,[a[21]||(a[21]=e("i",{class:"fas fa-arrow-up text-blue-500"},null,-1)),e("span",mo,"父组: "+n(y(x.parentId)),1)])):w("",!0),x.childCount>0?(d(),g("div",fo,[a[22]||(a[22]=e("i",{class:"fas fa-arrow-down text-green-500"},null,-1)),e("span",yo,n(x.childCount)+" 个子组",1)])):w("",!0),!x.parentId&&x.childCount===0?(d(),g("span",vo," 顶级组 ")):w("",!0)])]),e("td",bo,[e("div",ko,[a[23]||(a[23]=e("i",{class:"fas fa-user text-blue-500"},null,-1)),e("span",ho,n(x.memberCount||0),1),a[24]||(a[24]=e("span",{class:"text-xs text-gray-500"},"成员",-1))])]),e("td",wo,[e("div",$o,[e("div",Co,[a[25]||(a[25]=e("i",{class:"fas fa-server text-purple-500"},null,-1)),e("span",_o,n(x.accountCount||0),1),a[26]||(a[26]=e("span",{class:"text-xs text-gray-500"},"账户",-1))]),e("div",Ao,[(X=(J=x.accounts)==null?void 0:J.claudeAccounts)!=null&&X.length?(d(),g("span",jo," C:"+n(x.accounts.claudeAccounts.length),1)):w("",!0),(xe=(Z=x.accounts)==null?void 0:Z.geminiAccounts)!=null&&xe.length?(d(),g("span",Mo," G:"+n(x.accounts.geminiAccounts.length),1)):w("",!0),(me=(pe=x.accounts)==null?void 0:pe.openaiAccounts)!=null&&me.length?(d(),g("span",Go," O:"+n(x.accounts.openaiAccounts.length),1)):w("",!0)])])]),e("td",Uo,[e("div",Eo,[a[27]||(a[27]=e("i",{class:"fas fa-cog text-indigo-500"},null,-1)),e("span",Io,n(o((fe=x.schedulingConfig)==null?void 0:fe.strategy)),1)])]),e("td",To,[e("span",{class:$(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",x.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"])},[e("i",{class:$(["fas mr-1",x.isActive?"fa-check-circle":"fa-times-circle"])},null,2),C(" "+n(x.isActive?"激活":"禁用"),1)],2)]),e("td",Fo,[e("div",Vo,[e("button",{class:"text-indigo-600 transition-colors hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:"查看详情",onClick:ne=>te(x)},[...a[28]||(a[28]=[e("i",{class:"fas fa-eye"},null,-1)])],8,Lo),e("button",{class:"text-blue-600 transition-colors hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"管理成员",onClick:ne=>U(x)},[...a[29]||(a[29]=[e("i",{class:"fas fa-users"},null,-1)])],8,Bo),e("button",{class:"text-purple-600 transition-colors hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",title:"分配账户",onClick:ne=>c(x)},[...a[30]||(a[30]=[e("i",{class:"fas fa-server"},null,-1)])],8,Do),e("button",{class:"text-yellow-600 transition-colors hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",title:"编辑",onClick:ne=>b(x)},[...a[31]||(a[31]=[e("i",{class:"fas fa-edit"},null,-1)])],8,So),e("button",{class:"text-red-600 transition-colors hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",disabled:x.memberCount>0||x.childCount>0,title:"删除",onClick:ne=>ke(x)},[...a[32]||(a[32]=[e("i",{class:"fas fa-trash"},null,-1)])],8,No)])])])}),128))])])]),G.value>1?(d(),g("div",zo,[e("div",Oo,[e("button",{class:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",disabled:v.value<=1,onClick:a[4]||(a[4]=x=>O(v.value-1))}," 上一页 ",8,Po),e("button",{class:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",disabled:v.value>=G.value,onClick:a[5]||(a[5]=x=>O(v.value+1))}," 下一页 ",8,Ro)]),e("div",qo,[e("div",null,[e("p",Wo,[a[34]||(a[34]=C(" 显示 ",-1)),e("span",Ko,n((v.value-1)*s.value+1),1),a[35]||(a[35]=C(" 到 ",-1)),e("span",Qo,n(Math.min(v.value*s.value,T.value)),1),a[36]||(a[36]=C(" 项， 共 ",-1)),e("span",Yo,n(T.value),1),a[37]||(a[37]=C(" 项 ",-1))])]),e("div",null,[e("nav",Ho,[e("button",{class:"relative inline-flex items-center rounded-l-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",disabled:v.value<=1,onClick:a[6]||(a[6]=x=>O(v.value-1))},[...a[38]||(a[38]=[e("i",{class:"fas fa-chevron-left"},null,-1)])],8,Jo),(d(!0),g(P,null,R(z.value,x=>(d(),g("button",{key:x,class:$(["relative inline-flex items-center border px-4 py-2 text-sm font-medium transition-colors",x===v.value?"z-10 border-indigo-500 bg-indigo-50 text-indigo-600 dark:border-indigo-400 dark:bg-indigo-900/30 dark:text-indigo-300":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"]),onClick:J=>O(x)},n(x),11,Xo))),128)),e("button",{class:"relative inline-flex items-center rounded-r-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",disabled:v.value>=G.value,onClick:a[7]||(a[7]=x=>O(v.value+1))},[...a[39]||(a[39]=[e("i",{class:"fas fa-chevron-right"},null,-1)])],8,Zo)])])])])):w("",!0)])]),M.value?(d(),de(ot,{key:0,group:_.value,"parent-groups":p.value.filter(x=>{var J;return x.id!==((J=_.value)==null?void 0:J.id)}),visible:M.value,onClose:N,onSaved:K},null,8,["group","parent-groups","visible"])):w("",!0),k.value?(d(),de(es,{key:1,group:_.value,visible:k.value,onClose:r,onUpdated:j},null,8,["group","visible"])):w("",!0),t.value?(d(),de(ir,{key:2,group:_.value,visible:t.value,onClose:ce,onUpdated:be},null,8,["group","visible"])):w("",!0),m.value?(d(),de(Oa,{key:3,group:_.value,visible:m.value,onAssignAccounts:ee,onClose:Q,onEdit:se,onManageMembers:i},null,8,["group","visible"])):w("",!0)]))}},ol=ie(el,[["__scopeId","data-v-a7939002"]]);export{ol as default};
